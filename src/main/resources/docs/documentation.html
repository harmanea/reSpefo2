<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>manual</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none 0s ease 0s; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="mermaid"] svg, [lang="flow"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root { --side-bar-bg-color: #fafafa; --control-text-color: #777; }
html { font-size: 16px; }
body { font-family: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; color: rgb(51, 51, 51); line-height: 1.6; }
#write { max-width: 860px; margin: 0px auto; padding: 30px 30px 100px; }
#write > ul:first-child, #write > ol:first-child { margin-top: 30px; }
a { color: rgb(65, 131, 196); }
h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { text-decoration: none; }
h1 tt, h1 code { font-size: inherit; }
h2 tt, h2 code { font-size: inherit; }
h3 tt, h3 code { font-size: inherit; }
h4 tt, h4 code { font-size: inherit; }
h5 tt, h5 code { font-size: inherit; }
h6 tt, h6 code { font-size: inherit; }
h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
h3 { font-size: 1.5em; line-height: 1.43; }
h4 { font-size: 1.25em; }
h5 { font-size: 1em; }
h6 { font-size: 1em; color: rgb(119, 119, 119); }
p, blockquote, ul, ol, dl, table { margin: 0.8em 0px; }
li > ol, li > ul { margin: 0px; }
hr { height: 2px; padding: 0px; margin: 16px 0px; background-color: rgb(231, 231, 231); border: 0px none; overflow: hidden; box-sizing: content-box; }
li p.first { display: inline-block; }
ul, ol { padding-left: 30px; }
ul:first-child, ol:first-child { margin-top: 0px; }
ul:last-child, ol:last-child { margin-bottom: 0px; }
blockquote { border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119); }
blockquote blockquote { padding-right: 0px; }
table { padding: 0px; word-break: initial; }
table tr { border-top: 1px solid rgb(223, 226, 229); margin: 0px; padding: 0px; }
table tr:nth-child(2n), thead { background-color: rgb(248, 248, 248); }
table tr th { font-weight: bold; border-width: 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: rgb(223, 226, 229); border-right-color: rgb(223, 226, 229); border-left-color: rgb(223, 226, 229); border-image: initial; border-bottom-style: initial; border-bottom-color: initial; margin: 0px; padding: 6px 13px; }
table tr td { border: 1px solid rgb(223, 226, 229); margin: 0px; padding: 6px 13px; }
table tr th:first-child, table tr td:first-child { margin-top: 0px; }
table tr th:last-child, table tr td:last-child { margin-bottom: 0px; }
.CodeMirror-lines { padding-left: 4px; }
.code-tooltip { box-shadow: rgba(0, 28, 36, 0.3) 0px 1px 1px 0px; border-top: 1px solid rgb(238, 242, 242); }
.md-fences, code, tt { border: 1px solid rgb(231, 234, 237); background-color: rgb(248, 248, 248); border-radius: 3px; padding: 2px 4px 0px; font-size: 0.9em; }
code { background-color: rgb(243, 244, 244); padding: 0px 2px; }
.md-fences { margin-bottom: 15px; margin-top: 15px; padding-top: 8px; padding-bottom: 6px; }
.md-task-list-item > input { margin-left: -1.3em; }
@media print {
  html { font-size: 13px; }
  table, pre { break-inside: avoid; }
  pre { overflow-wrap: break-word; }
}
.md-fences { background-color: rgb(248, 248, 248); }
#write pre.md-meta-block { padding: 1rem; font-size: 85%; line-height: 1.45; background-color: rgb(247, 247, 247); border: 0px; border-radius: 3px; color: rgb(119, 119, 119); margin-top: 0px !important; }
.mathjax-block > .code-tooltip { bottom: 0.375rem; }
.md-mathjax-midline { background: rgb(250, 250, 250); }
#write > h3.md-focus::before { left: -1.5625rem; top: 0.375rem; }
#write > h4.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h5.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h6.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
.md-image > .md-meta { border-radius: 3px; padding: 2px 0px 0px 4px; font-size: 0.9em; color: inherit; }
.md-tag { color: rgb(167, 167, 167); opacity: 1; }
.md-toc { margin-top: 20px; padding-bottom: 20px; }
.sidebar-tabs { border-bottom: none; }
#typora-quick-open { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); }
#typora-quick-open-item { background-color: rgb(250, 250, 250); border-color: rgb(254, 254, 254) rgb(229, 229, 229) rgb(229, 229, 229) rgb(238, 238, 238); border-style: solid; border-width: 1px; }
.on-focus-mode blockquote { border-left-color: rgba(85, 85, 85, 0.12); }
header, .context-menu, .megamenu-content, footer { font-family: "Segoe UI", Arial, sans-serif; }
.file-node-content:hover .file-node-icon, .file-node-content:hover .file-node-open-state { visibility: visible; }
.mac-seamless-mode #typora-sidebar { background-color: var(--side-bar-bg-color); }
.md-lang { color: rgb(180, 101, 77); }
.html-for-mac .context-menu { --item-hover-bg-color: #E6F0FE; }
#md-notification .btn { border: 0px; }
.dropdown-menu .divider { border-color: rgb(229, 229, 229); }
.ty-preferences .window-content { background-color: rgb(250, 250, 250); }
.ty-preferences .nav-group-item.active { color: white; background: rgb(153, 153, 153); }


</style>
</head>
<body class='typora-export' >
<div  id='write'  class = 'is-node'><h1><a name="user-documentation-for-the-program-respefo-2021-06-17" class="md-header-anchor"></a><span>User documentation for the program reSpefo (2021-06-17)</span></h1><blockquote><p><span>Released on the 17th June 2021, written by Adam Harmanec (</span><a href='mailto:adam@harmanec.com'><span>adam@harmanec.com</span></a><span>)</span></p></blockquote><p><span>ReSpefo is a modern refresh of the original program </span><a href='http://stelweb.asu.cas.cz/retarchive/pages/software/spefo/spefo.html'><span>Spefo</span></a><span>, a </span><em><span>&quot;Simple, Yet Powerful Program for One-Dimensional Spectra Analysis&quot;</span></em><span> originally written in Turbo Pascal. The new version is written in Java using contemporary tools with an improved user interface and functionality.</span></p><p>&nbsp;</p><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h1" data-ref="n0"><a class="md-toc-inner" style="cursor: pointer;" href="#user-documentation-for-the-program-respefo-2021-06-17">User documentation for the program reSpefo (2021-06-17)</a></span><span class="md-toc-item md-toc-h2" data-ref="n7"><a class="md-toc-inner" style="cursor: pointer;" href="#launching-respefo">Launching ReSpefo</a></span><span class="md-toc-item md-toc-h3" data-ref="n14"><a class="md-toc-inner" style="cursor: pointer;" href="#system-requirements">System requirements</a></span><span class="md-toc-item md-toc-h2" data-ref="n23"><a class="md-toc-inner" style="cursor: pointer;" href="#file-formats">File Formats</a></span><span class="md-toc-item md-toc-h2" data-ref="n37"><a class="md-toc-inner" style="cursor: pointer;" href="#user-interface">User Interface</a></span><span class="md-toc-item md-toc-h3" data-ref="n41"><a class="md-toc-inner" style="cursor: pointer;" href="#menu">Menu</a></span><span class="md-toc-item md-toc-h3" data-ref="n49"><a class="md-toc-inner" style="cursor: pointer;" href="#sidebars-and-tool-windows">Sidebars and Tool Windows</a></span><span class="md-toc-item md-toc-h3" data-ref="n56"><a class="md-toc-inner" style="cursor: pointer;" href="#scene">Scene</a></span><span class="md-toc-item md-toc-h3" data-ref="n60"><a class="md-toc-inner" style="cursor: pointer;" href="#project-explorer">Project Explorer</a></span><span class="md-toc-item md-toc-h3" data-ref="n65"><a class="md-toc-inner" style="cursor: pointer;" href="#spectrum-explorer">Spectrum Explorer</a></span><span class="md-toc-item md-toc-h3" data-ref="n71"><a class="md-toc-inner" style="cursor: pointer;" href="#event-log">Event Log</a></span><span class="md-toc-item md-toc-h3" data-ref="n77"><a class="md-toc-inner" style="cursor: pointer;" href="#controls">Controls</a></span><span class="md-toc-item md-toc-h2" data-ref="n136"><a class="md-toc-inner" style="cursor: pointer;" href="#functions">Functions</a></span><span class="md-toc-item md-toc-h3" data-ref="n139"><a class="md-toc-inner" style="cursor: pointer;" href="#clean">Clean</a></span><span class="md-toc-item md-toc-h3" data-ref="n165"><a class="md-toc-inner" style="cursor: pointer;" href="#compare">Compare</a></span><span class="md-toc-item md-toc-h3" data-ref="n171"><a class="md-toc-inner" style="cursor: pointer;" href="#copy">Copy</a></span><span class="md-toc-item md-toc-h3" data-ref="n177"><a class="md-toc-inner" style="cursor: pointer;" href="#delete">Delete</a></span><span class="md-toc-item md-toc-h3" data-ref="n183"><a class="md-toc-inner" style="cursor: pointer;" href="#derive-dispersion">Derive Dispersion</a></span><span class="md-toc-item md-toc-h3" data-ref="n195"><a class="md-toc-inner" style="cursor: pointer;" href="#ew-results">EW Results</a></span><span class="md-toc-item md-toc-h3" data-ref="n204"><a class="md-toc-inner" style="cursor: pointer;" href="#export">Export</a></span><span class="md-toc-item md-toc-h3" data-ref="n212"><a class="md-toc-inner" style="cursor: pointer;" href="#generate-lst-file">Generate .lst File</a></span><span class="md-toc-item md-toc-h3" data-ref="n218"><a class="md-toc-inner" style="cursor: pointer;" href="#import">Import</a></span><span class="md-toc-item md-toc-h3" data-ref="n228"><a class="md-toc-inner" style="cursor: pointer;" href="#inspect-fits-header">Inspect FITS Header</a></span><span class="md-toc-item md-toc-h3" data-ref="n236"><a class="md-toc-inner" style="cursor: pointer;" href="#interactive-chiron-rectification">Interactive Chiron Rectification</a></span><span class="md-toc-item md-toc-h3" data-ref="n245"><a class="md-toc-inner" style="cursor: pointer;" href="#measure-ew">Measure EW</a></span><span class="md-toc-item md-toc-h3" data-ref="n254"><a class="md-toc-inner" style="cursor: pointer;" href="#measure-rv">Measure RV</a></span><span class="md-toc-item md-toc-h3" data-ref="n292"><a class="md-toc-inner" style="cursor: pointer;" href="#open">Open</a></span><span class="md-toc-item md-toc-h3" data-ref="n299"><a class="md-toc-inner" style="cursor: pointer;" href="#open-in-file-manager">Open in File Manager</a></span><span class="md-toc-item md-toc-h3" data-ref="n305"><a class="md-toc-inner" style="cursor: pointer;" href="#open-plain-text">Open Plain Text</a></span><span class="md-toc-item md-toc-h3" data-ref="n311"><a class="md-toc-inner" style="cursor: pointer;" href="#"></a></span><span class="md-toc-item md-toc-h3" data-ref="n312"><a class="md-toc-inner" style="cursor: pointer;" href="#paste">Paste</a></span><span class="md-toc-item md-toc-h3" data-ref="n398"><a class="md-toc-inner" style="cursor: pointer;" href="#prepare-project">Prepare Project</a></span><span class="md-toc-item md-toc-h3" data-ref="n319"><a class="md-toc-inner" style="cursor: pointer;" href="#rectify">Rectify</a></span><span class="md-toc-item md-toc-h3" data-ref="n365"><a class="md-toc-inner" style="cursor: pointer;" href="#rename">Rename</a></span><span class="md-toc-item md-toc-h3" data-ref="n373"><a class="md-toc-inner" style="cursor: pointer;" href="#rv-results">RV Results</a></span><span class="md-toc-item md-toc-h3" data-ref="n382"><a class="md-toc-inner" style="cursor: pointer;" href="#trim">Trim</a></span><span class="md-toc-item md-toc-h2" data-ref="n390"><a class="md-toc-inner" style="cursor: pointer;" href="#final-remarks">Final Remarks</a></span></p></div><h2><a name="launching-respefo" class="md-header-anchor"></a><span>Launching ReSpefo</span></h2><p><span>ReSpefo is distributed as a runnable </span><code>.jar</code><span> archive. The program can be started from a terminal or command line using the following command:</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="shell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">java <span class="cm-attribute">-jar</span> reSpefo.jar</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>&nbsp;</p><p><span>On Windows, it is possible to associate the Java Platform SE binary with the </span><code>.jar</code><span> file suffix so that it is always automatically executed using Java.</span></p><p><span>On MacOS, it might be necessary to also add the </span><code>-XstartOnFirstThread</code><span> switch.</span></p><p>&nbsp;</p><h3><a name="system-requirements" class="md-header-anchor"></a><span>System requirements</span></h3><ul><li><span>Java 8 or higher</span></li><li><span>At least 1 GB of RAM</span></li><li><span>Linux 64/32 bit, Windows 64/32 bit or MacOS 64 bit</span></li></ul><p>&nbsp;</p><h2><a name="file-formats" class="md-header-anchor"></a><span>File Formats</span></h2><p><span>The program has a proprietary internal file format based on JSON with the </span><code>.spf</code><span> file extension. It stores the raw spectrum data, origin information and function metadata. Thanks to it&#39;s structure, the preprocessing steps and measurements can be revisited and updated without the need to redo any of the other steps.</span></p><p><span>Three file formats are currently available for import and export:</span></p><ul><li><p><a href='https://fits.gsfc.nasa.gov/fits_standard.html'><span>FITS</span></a><span> - Flexible Image Transport System (</span><code>.fits</code><span>, </span><code>.fit</code><span>, </span><code>.fts</code><span>)</span></p></li><li><p><span>Ascii plain-text (</span><code>.txt</code><span>, </span><code>.ascii</code><span>, no extension)</span></p></li><li><p><span>Original legacy Spefo formats (</span><code>.uui</code><span>, </span><code>.rui</code><span>, </span><code>.rci</code><span>, </span><code>.con</code><span>) </span></p><ul><li><span>only for import</span></li></ul></li></ul><p>&nbsp;</p><h2><a name="user-interface" class="md-header-anchor"></a><span>User Interface</span></h2><p><img src="screenshot.png" referrerpolicy="no-referrer" alt="Screenshot"></p><p><span>The UI consists of several parts marked by a number in the screenshot above.</span></p><p>&nbsp;</p><h3><a name="menu" class="md-header-anchor"></a><span>Menu</span></h3><p><span>Marked by the number </span><strong><span>1</span></strong><span>, the standard menu serves as a way to quickly access global and debug functions.</span></p><p><span>The </span><em><span>File</span></em><span> menu contains functionality for opening, importing and exporting files. All of the functionality is also available from the </span><em><span>Project</span></em><span> and </span><em><span>Spectrum Explorer</span></em><span>.</span></p><p><span>The </span><em><span>Project</span></em><span> menu contains functionality for working with the project as a whole. Functions launched from this menu will scan the whole project directory and use all relevant files.</span></p><p><span>The </span><em><span>Window</span></em><span> menu contains functionality for adjusting the user interface.</span></p><p><span>The </span><em><span>Debug</span></em><span> menu is meant for development purposes only and will eventually be removed. Regular users shouldn&#39;t need it.</span></p><p><span>The </span><em><span>Help</span></em><span> menu contains useful references when errors are encountered. It also contains a reference to this documentation.</span></p><p><strong><span>Note:</span></strong><span>  In the current version, the menu is relatively empty but will be updated over time.</span></p><p>&nbsp;</p><h3><a name="sidebars-and-tool-windows" class="md-header-anchor"></a><span>Sidebars and Tool Windows</span></h3><p><span>There are three sidebars on the left, right and bottom edge of the user interface (marked by the numbers </span><strong><span>2</span></strong><span>, </span><strong><span>3</span></strong><span> and </span><strong><span>4</span></strong><span> respectively). These sidebars contain different tabs. Clicking on them will show and hide their corresponding tool window. Each sidebar has it&#39;s own tool window right next to it (marked by the numbers </span><strong><span>5</span></strong><span>, </span><strong><span>6</span></strong><span> and </span><strong><span>7</span></strong><span> respectively). When any of the tool bars is opened, it&#39;s size can be adjusted by dragging the sash on it&#39;s border. The content of the tool window is determined by the tab that is currently selected. Each tool window has a bar at the top with the tool window&#39;s name, contextual buttons and a </span><em><span>Hide</span></em><span> button.</span></p><p><span>The left bar (</span><strong><span>2</span></strong><span>) and tool window (</span><strong><span>5</span></strong><span>) are used for working with the whole project. The </span><em><span>Project and Spectra</span></em><span> tabs are used to access the </span><em><span>Project Explorer</span></em><span> and </span><em><span>Spectra Explorer</span></em><span> respectively.</span></p><p><span>The right bar (</span><strong><span>4</span></strong><span>) and tool window (</span><strong><span>7</span></strong><span>) are contextually filled with tools for the function that is currently being used. When no function is selected, the bar is empty.</span></p><p><span>The bottom bar (</span><strong><span>3</span></strong><span>) and tool window (</span><strong><span>6</span></strong><span>) contain the </span><em><span>Event Log</span></em><span>. If the tool window is hidden, the latest logs are temporarily displayed next to the icon in the bottom left. Clicking their text also shows the </span><em><span>Event Log</span></em><span> tool window and clears the tab. Long-running processes can display a progress bar along with a short description in the right-most part of the bar.</span></p><p><strong><span>Note:</span></strong><span> Some permanent tabs might be placed at the bottom of the right bar in the future.</span></p><p>&nbsp;</p><h3><a name="scene" class="md-header-anchor"></a><span>Scene</span></h3><p><span>The central part of the user interface (marked by the number </span><strong><span>8</span></strong><span>) is called the </span><em><span>Scene</span></em><span>. It is where the user interacts with all graphical functions. It&#39;s content is filled and cleared dynamically based on the current function.</span></p><p><strong><span>Note:</span></strong><span> Some functions will not clear the scene automatically. This is okay. The next function that needs it will clear it and continue as expected.</span></p><p>&nbsp;</p><h3><a name="project-explorer" class="md-header-anchor"></a><span>Project Explorer</span></h3><p><span>The Project Explorer can be found in the left tool window after clicking the </span><em><span>Project</span></em><span> tab in the left sidebar.</span></p><p><span>It works as a simplified file explorer, similar to the one present in most operating systems. It allows copying and pasting, renaming and deleting files. It also serves as the main access point for most of the program&#39;s functionality. The Project Explorer features a contextual menu (opened by a right-click). It&#39;s content is dynamically filled in based on the currently selected file or group of files. The available functions and types of files they work with are described further in the chapter </span><strong><span>Functions</span></strong><span>. Some of the related functions are put in a group and are available in the second level of the menu.</span></p><p><span>The Project Explorer tool window has three contextual buttons. The first one from the left changes the project directory. The second one refreshes the files that are displayed, which is useful when they are modified by a different program. The third one collapses the file tree so that only the files in the top-level directory are visible.</span></p><p>&nbsp;</p><h3><a name="spectrum-explorer" class="md-header-anchor"></a><span>Spectrum Explorer</span></h3><p><span>The Spectrum Explorer can be found in the left tool window after clicking the </span><em><span>Spectra</span></em><span> tab in the left sidebar.</span></p><p><span>It accumulates and displays all </span><code>.spf</code><span> files in the project directory. The Spectrum Explorer features a contextual menu similar to the </span><em><span>Project Explorer</span></em><span>. All files may have up to three icons next to their names. They indicate whether the spectrum has been rectified (using the </span><strong><span>Rectify</span></strong><span> function) or whether rv or ew measurements were performed on it (using the </span><strong><span>Measure RV</span></strong><span> and </span><strong><span>Measure EW</span></strong><span> functions respectively).</span></p><p><span>The Spectrum Explorer tool window has two contextual buttons. The first one from the left changes the project directory. The second one refreshes the displayed files.</span></p><p><strong><span>Note:</span></strong><span> The Spectrum Explorer is currently in the preview phase and may be unstable or slow. In the current version, the Spectrum Explorer only scans the top-level directory and ignores any nested directories. The current icons are temporary and may be replaced in the future.</span></p><p>&nbsp;</p><h3><a name="event-log" class="md-header-anchor"></a><span>Event Log</span></h3><p><span>The Event Log can be found in the bottom tool window after clicking the icon in the bottom left corner.</span></p><p><span>It displays all log messages produced by the application in a scrollable, color-coded text viewer. The output contains the time of the log, it&#39;s importance and message. They may also contain clickable links that launch a contextual action.</span></p><p><span>The Event Log tool window has two contextual buttons. The first one from the left selects the minimum importance level. Only logs with the chosen or higher importance are displayed in the event log. The second one toggles the behavior of scrolling to the end. When enabled, the event log will always scroll to the bottom of the list when a new log appears.</span></p><p><strong><span>Note:</span></strong><span> The Event Log will contain more options and functionality in the future. No functions currently use the clickable links.</span></p><p>&nbsp;</p><h3><a name="controls" class="md-header-anchor"></a><span>Controls</span></h3><p><span>The communication between the application and the user is mostly carried out using dialog windows where user can select files, directories or additional settings for the corresponding functionality. Dialogs are usually confirmed by pressing the </span><strong><span>OK</span></strong><span> button and canceled by pressing the </span><strong><span>Cancel</span></strong><span> button or by closing the window.</span></p><p><span>For information and debugging purposes, the program also logs messages into the </span><em><span>Event Log</span></em><span>. Some important messages are also displayed in a pop-up message box.</span></p><p><span>A lot of the work is done with charts displayed in the main section of the user interface. The chart can be navigated using the mouse and the keyboard. The common controls are as follows:</span></p><figure><table><thead><tr><th><span>Function</span></th><th><span>1st Control</span></th><th><span>2nd Control</span></th></tr></thead><tbody><tr><td><strong><span>Move Up</span></strong></td><td><span>Arrow Up</span></td><td><span>W</span></td></tr><tr><td><strong><span>Move Left</span></strong></td><td><span>Arrow Left</span></td><td><span>A</span></td></tr><tr><td><strong><span>Move Down</span></strong></td><td><span>Arrow Down</span></td><td><span>S</span></td></tr><tr><td><strong><span>Move Right</span></strong></td><td><span>Arrow Right</span></td><td><span>D</span></td></tr><tr><td><strong><span>Zoom In</span></strong></td><td><span>+</span></td><td><span>Ctrl + Mouse Wheel Up</span></td></tr><tr><td><strong><span>Zoom Out</span></strong></td><td><span>-</span></td><td><span>Ctrl + Mouse Wheel Down</span></td></tr><tr><td><strong><span>Zoom In Y-axis</span></strong></td><td><span>Numpad 8</span></td><td><span>8</span></td></tr><tr><td><strong><span>Zoom Out Y-axis</span></strong></td><td><span>Numpad 2</span></td><td><span>2</span></td></tr><tr><td><strong><span>Zoom In X-axis</span></strong></td><td><span>Numpad 6</span></td><td><span>6</span></td></tr><tr><td><strong><span>Zoom Out X-axis</span></strong></td><td><span>Numpad 4</span></td><td><span>4</span></td></tr><tr><td><strong><span>Adjust the view</span></strong></td><td><span>Space</span></td><td>&nbsp;</td></tr><tr><td><strong><span>Move around</span></strong></td><td><span>Click and Drag</span></td><td>&nbsp;</td></tr></tbody></table></figure><p><strong><span>Note:</span></strong><span> The movement speed depends on the zoom level. More precise movement can be done when zoomed in whereas faster movement is more easily done when zoomed out.</span></p><p>&nbsp;</p><h2><a name="functions" class="md-header-anchor"></a><span>Functions</span></h2><p><strong><span>Note:</span></strong><span>  The following list is ordered alphabetically not in the order of importance.</span></p><p>&nbsp;</p><h3><a name="clean" class="md-header-anchor"></a><span>Clean</span></h3><blockquote><p><strong><span>group:</span></strong><span> Preprocessing</span></p><p><span>Applicable to a single file in the internal format.</span></p></blockquote><p><span>This function is used to remove excessive noise or bad pixels from a spectrum file.</span></p><p><span>The selected spectrum is loaded and displayed in a scatter chart. One of the points is always considered to be active and is displayed in a different color. When the mouse moves, the closest point to it is selected as the active one. Unwanted points can be cleared and the program will calculate a new position for them using Hermite polynomials. The deleted points are still visible and displayed in a different color and can be restored.</span></p><p><span>The chart can then be navigated as described in the section </span><strong><span>Controls</span></strong><span>. Additionally, there is a number of other control elements:</span></p><figure><table><thead><tr><th><span>Control</span></th><th><span>Action</span></th></tr></thead><tbody><tr><td><strong><span>Delete</span></strong></td><td><span>Clear the active point</span></td></tr><tr><td><strong><span>Insert</span></strong></td><td><span>Restore the active point</span></td></tr><tr><td><strong><span>N</span></strong></td><td><span>Change the active point to the one to the left (if there is any)</span></td></tr><tr><td><strong><span>M</span></strong></td><td><span>Change the active point to the one to the right (if there is any)</span></td></tr></tbody></table></figure><p><span>The cleaning process is confirmed by pressing </span><strong><span>Enter</span></strong><span>. That will clean and display the updated spectrum as if it was just loaded. </span></p><p><strong><span>Note:</span></strong><span> In the current version, it is not possible to add or move points to smooth out large cleared areas.</span></p><p>&nbsp;</p><h3><a name="compare" class="md-header-anchor"></a><span>Compare</span></h3><blockquote><p><span>Applicable to multiple files in the internal format.</span></p></blockquote><p><span>This function is used to compare multiple spectrum files.</span></p><p><span>The selected spectra are loaded and displayed in different colors. The same colors are used in the chart title. The chart can then be navigated as described in the section </span><strong><span>Controls</span></strong><span>.</span></p><p>&nbsp;</p><h3><a name="copy" class="md-header-anchor"></a><span>Copy</span></h3><blockquote><p><span>Applicable to any single file or any group of files.</span></p></blockquote><p><span>This function is used to copy files.</span></p><p><span>The selected files are stored in a clipboard and can be pasted using the function </span><strong><span>Paste</span></strong><span>.</span></p><p>&nbsp;</p><h3><a name="delete" class="md-header-anchor"></a><span>Delete</span></h3><blockquote><p><span>Applicable to any single file or any group of files.</span></p></blockquote><p><span>This function is used to delete files.</span></p><p><span>A confirmation message box appears with the names of the selected files. If confirmed, all the selected files are deleted. If a directory is selected, it&#39;s contents are also recursively deleted. If the deletion of any of the files failed, a message box with their names is displayed.</span></p><p>&nbsp;</p><h3><a name="derive-dispersion" class="md-header-anchor"></a><span>Derive Dispersion</span></h3><blockquote><p><strong><span>group:</span></strong><span> FITS</span></p><p><span>Applicable to a single file in the FITS format.</span></p></blockquote><p><span>This function is used to transform a spectrum in pixels to wavelength. It also automatically imports the file into the internal format.</span></p><p><span>At first, three additional FITS files need to be selected. One lab light file that was obtained before the selected file, one lab light file that was obtained after the selected file and a </span><code>.cmp</code><span> file with laboratory values for absorption lines.</span></p><p><span>The process is split up into several stages:</span></p><p><span>In the first stage, at least two lines must be manually selected and measured. A new line is added using </span><strong><span>Insert</span></strong><span>. It can then be moved using the mouse or  </span><strong><span>J</span></strong><span> and </span><strong><span>L</span></strong><span>. The line can be canceled using </span><strong><span>Escape</span></strong><span>. </span><strong><span>Enter</span></strong><span> is used to confirm that the line is positioned approximately where it is supposed to be. The user then needs to specify the number of the line as defined in the </span><code>.cmp</code><span> file and measure it&#39;s center using a mirrored profile as in the </span><strong><span>Measure RV</span></strong><span> function for both the lab light files. When at least two lines are measured this way, pressing </span><strong><span>Enter</span></strong><span> will proceed to the next stage.</span></p><p><span>In the second stage, all the remaining lines are measured for both the lab light files. The user no longer needs to manually position them because they are interpolated from the already measured ones. As usual, the measurements are confirmed using </span><strong><span>Enter</span></strong><span> or </span><strong><span>Insert</span></strong><span> and skipped using </span><strong><span>Escape</span></strong><span> or </span><strong><span>End</span></strong><span>.</span></p><p><span>When all the lines are processed, the dispersion function is calculated. The measurements whose residuals are at least 1.5 times larger than the mean aren&#39;t used. Information about the function are displayed in the results page. The dispersion function is modeled in the top left corner. The residuals are in the bottom left corner, with the unused ones in a different color. A table with the measurements is displayed in the right part, with the unused measurements grayed out. Below the table are the calculated polynomial coefficients. The user can select a row in the measurements table and use </span><strong><span>Delete</span></strong><span> to toggle whether that measurement is used or not. The results are updated accordingly. Below the coefficients are three buttons. The first one, </span><strong><span>Poly degree</span></strong><span>, can be used to change the degree of the polynomial. Values of 3 or 5 are recommended. The second button, </span><strong><span>Print to file</span></strong><span>, can be used to generate a </span><code>.cmf</code><span> file with the results. The last button, </span><strong><span>Finish</span></strong><span>, will confirm the results, import the spectrum file, transform it&#39;s data using the calculated dispersion function, save it into a new file using the internal format and display the imported spectrum as if it was just loaded. </span></p><p><strong><span>Note:</span></strong><span> The first dialog is temporary and will be improved. This function has not been properly tested, use with caution.</span></p><p>&nbsp;</p><h3><a name="ew-results" class="md-header-anchor"></a><span>EW Results</span></h3><blockquote><p><strong><span>group:</span></strong><span> Results</span></p><p><span>Applicable to a single file or multiple files in the internal format or to the whole project.</span></p></blockquote><p><span>This function is used to display the results of the measurements obtained using the function </span><strong><span>Measure EW</span></strong><span>. It can be used to display more detailed results for a single file or to combine the results from multiple files into a single table.</span></p><p><span>If used on a single file, the user can delete the measurements for a single line using the </span><strong><span>Delete</span></strong><span> button.</span></p><p><span>If used on multiple files, the user can print the results into an </span><code>.eqw</code><span> file using the </span><strong><span>Print to file</span></strong><span> button.</span></p><p><span>If used on the whole project, it&#39;s root directory is scanned for </span><code>.spf</code><span> files and continues as if they were selected manually.</span></p><p>&nbsp;</p><h3><a name="export" class="md-header-anchor"></a><span>Export</span></h3><blockquote><p><span>Applicable to a single file or multiple files in the internal format.</span></p></blockquote><p><span>This function is used to convert files in the internal format to a different format.</span></p><p><span>If used on a single file, the user can select the full name of the new file. The file extension is then used to determine the available export formats. The preferred one can then be selected in a dialog.</span></p><p><span>If used on multiple files, the user can select the file extension for all files. The file extension is then used to determine the available export formats. The preferred one can then be selected in a dialog. The names of the files are kept the same except for the file extension.</span></p><p><strong><span>Note:</span></strong><span> This function can elegantly handle overriding and renaming duplicate files.</span></p><p>&nbsp;</p><h3><a name="generate-lst-file" class="md-header-anchor"></a><span>Generate .lst File</span></h3><blockquote><p><span>Applicable to multiple files in the internal or FITS format.</span></p></blockquote><p><span>This function is used to create a </span><code>.lst</code><span> file with a table of the selected files.</span></p><p><strong><span>Note:</span></strong><span> The generated file header is empty.</span></p><p>&nbsp;</p><h3><a name="import" class="md-header-anchor"></a><span>Import</span></h3><blockquote><p><span>Applicable to a single file or multiple files in any of the importable formats.</span></p></blockquote><p><span>This function is used to convert files into the internal format.</span></p><p><span>The file extensions of the selected files are extracted and used to determine the available import formats. The preferred one can then be selected in a dialog. If used on a single file, the user can select the full name of the new file. If used on multiple files, the names of the files are kept the same except for the file extension.</span></p><p><span>If there is some spectra metadata missing after the import, the program will try to search for a corresponding </span><code>.lst</code><span> file and it&#39;s record and use it to complete the data. This works for hjd, date of observation, rv correction (which is also applied) and time of exposure. If a </span><code>.lst</code><span> cannot be found, the search silently fails.</span></p><p><strong><span>Note:</span></strong><span> The imported spectra files must contain a RV correction. If they don&#39;t contain one, a dialog asking for it is displayed.</span></p><p><strong><span>Note:</span></strong><span> This function checks for the presence of NaNs in the spectrum data and replaces them with zeros. In the future it might be possible to choose a different replacement value.</span></p><p><strong><span>Note:</span></strong><span> This function can elegantly handle overriding and renaming duplicate files.</span></p><p>&nbsp;</p><h3><a name="inspect-fits-header" class="md-header-anchor"></a><span>Inspect FITS Header</span></h3><blockquote><p><strong><span>group:</span></strong><span> FITS</span></p><p><span>Applicable to a single file in the FITS format.</span></p></blockquote><p><span>This function is used to inspect the header of a FITS file. No changes to the file can be made.</span></p><p><span>The FITS file is loaded and it&#39;s header values are displayed in a table.</span></p><p><strong><span>Note:</span></strong><span> Whole rows can be copied into the system clipboard using </span><strong><span>Ctrl + C</span></strong><span>.</span></p><p>&nbsp;</p><h3><a name="interactive-chiron-rectification" class="md-header-anchor"></a><span>Interactive Chiron Rectification</span></h3><blockquote><p><strong><span>group:</span></strong><span> FITS</span></p><p><span>Applicable to a single file in the FITS format.</span></p></blockquote><p><span>This function is used to import FITS files from the CTIO Chiron spectrometer. Data stored in the selected echels can be rectified individually and stitched together.</span></p><p><span>First, the user is prompted to select echels to import and rectify in a dialog. The echels are then displayed one by one and can be rectified exactly as in the function </span><strong><span>Rectify</span></strong><span>. The data from the neighboring echels is also displayed to help with the process.</span></p><p><span>When all the parts are rectified, they are stitched together and saved into a new file using the internal format. A new name using the selected echell number is suggested. The new spectrum is then displayed as if it was just loaded.</span></p><p><strong><span>Note:</span></strong><span> This function has not been properly tested, use with caution. In the future, this function will provide hints to help with the rectification.</span></p><p><strong><span>Note:</span></strong><span> If only a single order was rectified, it&#39;s rectification points are saved and can be revisited using the funtion </span><strong><span>Rectify</span></strong><span>. Otherwise they are lost due to the nature of the data.</span></p><p>&nbsp;</p><h3><a name="measure-ew" class="md-header-anchor"></a><span>Measure EW</span></h3><blockquote><p><strong><span>group:</span></strong><span> Measure</span></p><p><span>Applicable to a single file in the internal format.</span></p></blockquote><p><span>This function is used to measure equivalent widths and other properties on a spectrum file.</span></p><p><span>First, the user is prompted to select a list of </span><code>.stl</code><span> files to use. The files are then loaded and a part of the spectrum is displayed in a line chart on the left. This is where the user measures the center or any other region of the line profile. Several vertical lines are displayed in the chart. One of them closest to the mouse is always considered to be active, is displayed in a different color and can be moved using the mouse. The blue lines are used to mark the area used for computing EW. To add a new measurement to the current line, press </span><strong><span>Enter</span></strong><span> or </span><strong><span>insert</span></strong><span>. That will open a dialog window where the user can select which part of the line is currently being measured. That will add a new orange line with it&#39;s type written near the top of the chart. A line can be deleted using </span><strong><span>Delete</span></strong><span>. To move to the next line, </span><strong><span>Escape</span></strong><span> or </span><strong><span>End</span></strong><span> can be used. The arrow buttons in the top bar of the right tool window can also be used to navigate between lines.</span></p><p><span>When the last line is measured the results are saved into the spectrum file and can be inspected using the </span><strong><span>EW Results</span></strong><span> function.</span></p><p><strong><span>Note:</span></strong><span> The controls for this function are not final and will improve in the future.</span></p><p>&nbsp;</p><h3><a name="measure-rv" class="md-header-anchor"></a><span>Measure RV</span></h3><blockquote><p><strong><span>group:</span></strong><span> Measure</span></p><p><span>Applicable to a single file in the internal format.</span></p></blockquote><p><span>This function is used to measure radial velocity on a spectrum file.</span></p><p><span>First, the user is prompted to select two lists of </span><code>.stl</code><span> files to use. The first one is for regular measurements and the second one is for measuring telluric lines. </span></p><p><span>The files are then loaded and a part of the spectrum as well as a flipped part of it is displayed in a line chart on the left. This is where the user measures the center or any other region of the line profile by aligning the original and flipped lines. When the measurement is confirmed, a new dialog appears where the user selects a category and optionally a comment. Correction measurements have their category predefined.</span></p><p><span>The chart can then be navigated as described in the section </span><strong><span>Controls</span></strong><span> with some exceptions and additions:</span></p><figure><table><thead><tr><th><span>Control</span></th><th><span>Action</span></th></tr></thead><tbody><tr><td><strong><span>Arrow Left</span></strong><span> or </span><strong><span>A</span></strong></td><td><span>Move the flipped part to the left</span></td></tr><tr><td><strong><span>Arrow Right</span></strong><span> or </span><strong><span>D</span></strong></td><td><span>Move the flipped part to the right</span></td></tr><tr><td><strong><span>Click and Drag</span></strong></td><td><span>Move the flipped part</span></td></tr><tr><td><strong><span>Tab</span></strong></td><td><span>Expand the flipped radius</span></td></tr><tr><td><strong><span>Ctrl + Tab</span></strong></td><td><span>Shrink the flipped radius</span></td></tr><tr><td><strong><span>Enter</span></strong><span> or </span><strong><span>Insert</span></strong></td><td><span>Confirm measurement</span></td></tr><tr><td><strong><span>Escape</span></strong><span> or </span><strong><span>End</span></strong></td><td><span>Move to the next measurement</span></td></tr></tbody></table></figure><p><span>The table in the right tool window as well as the arrow buttons in the top bar of the </span><em><span>Lines</span></em><span> tab in the right sidebar can be used to navigate between lines.</span></p><p><span>In the </span><em><span>RV Step</span></em><span> tab of the right sidebar, the user can select the type of rv step to use when using the keyboard to move the flipped part. It&#39;s size can either be calculated dynamically from the zoom level or set to a fixed value.</span></p><p><span>When the last line is measured or the check button in the top bar of the </span><em><span>Lines</span></em><span> tab is pressed the results are saved into the spectrum file and can be inspected using the </span><strong><span>RV Results</span></strong><span> function.</span></p><p><strong><span>Note:</span></strong><span> The controls for this function are not final and will improve in the future.</span></p><p>&nbsp;</p><h3><a name="open" class="md-header-anchor"></a><span>Open</span></h3><blockquote><p><span>Applicable to a single file in the internal format.</span></p></blockquote><p><span>This function is used to display and inspect individual spectrum files. No changes to the file can be made.</span></p><p><span>The spectrum is loaded and displayed in a line chart. The chart can then be navigated as described in the section </span><strong><span>Controls</span></strong><span>.</span></p><p><span>In the </span><em><span>Info</span></em><span> tab of the right sidebar, the spectrum metadata is displayed in a table. Some values may be edited by selecting the respective row and clicking the only button in the tool window tab or by double-clicking the row directly. A modal dialog is used to select the new value. The updated values are saved automatically. If a change is made to the rv correction, the difference can be applied to the spectrum data by confirming the follow-up dialog.</span></p><p>&nbsp;</p><h3><a name="open-in-file-manager" class="md-header-anchor"></a><span>Open in File Manager</span></h3><blockquote><p><span>Applicable to a single directory.</span></p></blockquote><p><span>This function is used to open a directory in operating system&#39;s default file manager.</span></p><p><strong><span>Note:</span></strong><span> Not all operating systems support this functionality.</span></p><p>&nbsp;</p><h3><a name="open-plain-text" class="md-header-anchor"></a><span>Open Plain Text</span></h3><blockquote><p><span>Applicable to a single file in the ASCII format.</span></p></blockquote><p><span>This function is used to inspect a text file. No changes to the file can be made.</span></p><p><span>The file is loaded and displayed along with it&#39;s name at the top.</span></p><p><strong><span>Note:</span></strong><span> This function is not very effective in opening large files.</span></p><h3><a name="" class="md-header-anchor"></a></h3><h3><a name="paste" class="md-header-anchor"></a><span>Paste</span></h3><blockquote><p><span>Applicable to any single file.</span></p></blockquote><p><span>This function is used to paste files from the clipboard to a new location.</span></p><p><span>The files copied using the function </span><strong><span>Copy</span></strong><span> are inserted into the selected directory or it&#39;s parent if it is not a directory. This function is not available if multiple files are selected or there are no files in the clipboard.</span></p><p><strong><span>Note:</span></strong><span> This function can elegantly handle overriding and renaming duplicate files.</span></p><p>&nbsp;</p><h3><a name="prepare-project" class="md-header-anchor"></a><span>Prepare Project</span></h3><blockquote><p><span>Applicable to the whole project.</span></p></blockquote><p><span>This function is used to prepare a directory of FITS files for processing.</span></p><p><span>It scans the project directory for FITS files and renames them all using a given prefix. In addition, it has three different modes:</span></p><ol><li><strong><span>Use existing </span><code>.lst</code><span> file</span></strong><span> also renames the selected file.</span></li><li><strong><span>Generate </span><code>.lst</code><span> file</span></strong><span> also creates a new </span><code>.lst</code><span> file similarly to the function </span><strong><span>Generate .lst file</span></strong><span>.</span></li><li><strong><span>Generate </span><code>hec2</code><span> input data</span></strong><span> also creates a new file to be used as input for the program hec2.</span></li></ol><p><strong><span>Note:</span></strong><span> This function is still being worked on and will be streamlined in the future.</span></p><p>&nbsp;</p><h3><a name="rectify" class="md-header-anchor"></a><span>Rectify</span></h3><blockquote><p><strong><span>group:</span></strong><span> Preprocessing</span></p><p><span>Applicable to a single file in the internal format.</span></p></blockquote><p><span>This function is used to rectify a spectrum. It works by defining a continuum using multiple points selected in a chart. The program models and displays the continuum in real-time using Hermite polynomials. When confirmed, the flux values of the original spectrum are divided by the values defined by the continuum, therefore transforming them into relative values.</span></p><p><span>The selected spectrum is loaded and displayed in a line chart. In addition, two initial rectification points are created or points are transferred from the previous rectification (if there was any). One of the points is always considered to be active and is displayed in a different color. When the mouse moves, the closest point to it is selected as the active one.</span></p><p><span>The chart can then be navigated as described in the section </span><strong><span>Controls</span></strong><span>. Additionally, there is a number of other control elements:</span></p><figure><table><thead><tr><th><span>Control</span></th><th><span>Action</span></th></tr></thead><tbody><tr><td><strong><span>Insert</span></strong></td><td><span>Add a new point to the center of the view (it is selected as active)</span></td></tr><tr><td><strong><span>Left Mouse Click</span></strong></td><td><span>Add a new point at the cursor location (it is selected as active)</span></td></tr><tr><td><strong><span>Delete</span></strong></td><td><span>Delete the active point (unless it is the last one)</span></td></tr><tr><td><strong><span>Right Mouse Click</span></strong></td><td><span>Delete the active point (unless it is the last one)</span></td></tr><tr><td><strong><span>I</span></strong></td><td><span>Move the active point up</span></td></tr><tr><td><strong><span>J</span></strong></td><td><span>Move the active point left</span></td></tr><tr><td><strong><span>K</span></strong></td><td><span>Move the active point down</span></td></tr><tr><td><strong><span>L</span></strong></td><td><span>Move the active point right</span></td></tr><tr><td><strong><span>N</span></strong></td><td><span>Change the active point to the one to the left (if there is any)</span></td></tr><tr><td><strong><span>M</span></strong></td><td><span>Change the active point to the one to the right (if there is any)</span></td></tr><tr><td><strong><span>P</span></strong></td><td><span>Adjust the view so that the active point is in the center</span></td></tr></tbody></table></figure><p><span>The continuum selection is confirmed by pressing </span><strong><span>Enter</span></strong><span>. That will rectify and display the updated spectrum as if it was just loaded.</span></p><p>&nbsp;</p><h3><a name="rename" class="md-header-anchor"></a><span>Rename</span></h3><blockquote><p><span>Applicable to any single file or to the while project.</span></p></blockquote><p><span>This function is used to rename a file or the whole project.</span></p><p><span>If used on a single file, a text field replaces the file name in the </span><em><span>Project Explorer</span></em><span>. It can then be renamed in-place. The operation is confirmed using </span><strong><span>Enter</span></strong><span>. It can be canceled by pressing </span><strong><span>Escape</span></strong><span> or clicking away. A unique name for the file must be chosen.</span></p><p><span>If used on the whole project, the user is prompted to select a prefix for the new file names. A three letter prefix is recommended. The project directory is then scanned for </span><code>.spf</code><span> and </span><code>.lst</code><span> files. If multiple </span><code>.lst</code><span> files are found, the user is prompted to select one of them to be used. The selected files are then renamed using the prefix. The </span><code>.spf</code><span> files are sorted using their HJD and given an index based on that order.</span></p><p><strong><span>Note:</span></strong><span> The project version of this function does not have all the intended functionality yet.</span></p><p>&nbsp;</p><h3><a name="rv-results" class="md-header-anchor"></a><span>RV Results</span></h3><blockquote><p><strong><span>group:</span></strong><span> Results</span></p><p><span>Applicable to a single file or multiple files in the internal format or to the whole project.</span></p></blockquote><p><span>This function is used to display the results of the measurements obtained using the function </span><strong><span>Measure RV</span></strong><span>. It can be used to display more detailed results for a single file or to combine the results from multiple files into a single table.</span></p><p><span>If used on a single file, the user can delete the measurements for a single line using the </span><strong><span>Delete</span></strong><span> button.</span></p><p><span>If used on multiple files, the user can print the results into a </span><code>.rvs</code><span>, </span><code>.cor</code><span> or </span><code>.ac</code><span> file using the corresponding </span><strong><span>Print to ... file</span></strong><span> button.</span></p><p><span>If used on the whole project, it&#39;s root directory is scanned for </span><code>.spf</code><span> files and continues as if they were selected manually.</span></p><p>&nbsp;</p><h3><a name="trim" class="md-header-anchor"></a><span>Trim</span></h3><blockquote><p><strong><span>group:</span></strong><span> Preprocessing</span></p><p><span>Applicable to a single file in the internal format.</span></p></blockquote><p><span>This function can be used to limit the range of the spectrum to be used.</span></p><p><span>In a dialog, the minimum and maximum for the x values can be chosen. Confirming the dialog applies the change and displays the updated spectrum as if it was just loaded.</span></p><p><strong><span>Note:</span></strong><span> This function might have unexpected effects on some of the other preprocessing functions.</span></p><p>&nbsp;</p><h2><a name="final-remarks" class="md-header-anchor"></a><span>Final Remarks</span></h2><p><span>This is an early version of the documentation.</span></p><p><span>This program is still in active development and may contain bugs or crash unexpectedly, please always save and back up your work.</span></p><p><span>Any and all feedback is greatly appreciated.</span></p><p><span>Software is distributed under </span><a href='https://www.eclipse.org/legal/epl-2.0/'><span>EPL 2.0</span></a><span>.</span></p></div>
</body>
</html>